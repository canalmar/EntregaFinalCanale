{# client/client_list.html — Clients management (staff only) #}
{% extends "core/base.html" %}

{% block title %}Listado de Clientes{% endblock %}

{% block content %}
<style>
  /* Estilos minimalistas para botones de acción (igual que en product list) */
  .btn-action {
    padding: .25rem .7rem;
    font-size: .9rem;
    border-radius: .25rem;
    border: 1px solid transparent;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    transition: background-color .15s ease, border-color .15s ease;
  }
  .btn-edit {
    color: var(--bs-primary);
    border-color: rgba(var(--bs-primary-rgb), .4);
    background: transparent;
  }
  .btn-delete {
    color: var(--bs-danger);
    border-color: rgba(var(--bs-danger-rgb), .4);
    background: transparent;
  }
  .btn-action:hover,
  .btn-action:focus {
    background: rgba(var(--bs-dark-rgb), .05);
    border-color: rgba(var(--bs-dark-rgb), .15);
  }
</style>

<div class="container-lg mt-4">
  <h2 class="mb-4 fw-bold">
    <i class="bi bi-people-fill me-2 text-primary"></i>
    Gestión de Clientes
  </h2>

  {# Search bar (centrada y más compacta) ----------------------- #}
  <form method="get" class="d-flex justify-content-center mb-4" role="search">
    <div class="input-group" style="max-width: 420px;">
      <input
        type="text"
        name="search"
        class="form-control"
        placeholder="Buscar por nombre o apellido…"
        value="{{ search|default:'' }}"
        aria-label="Buscar cliente"
      >
      <button class="btn btn-primary" type="submit" data-bs-toggle="tooltip" title="Buscar">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </form>


  {% if clients %}
    <div class="card border-0 shadow-lg">
      <div class="table-responsive">
        <table class="table table-sm table-hover align-middle mb-0">
          <thead class="table-primary text-dark">
            <tr>
              <th scope="col">Apellido</th>
              <th scope="col">Nombre</th>
              <th scope="col">Email</th>
              <th scope="col">Teléfono</th>
              <th scope="col">Dirección</th>
              <th scope="col" class="text-center">Acciones</th>
            </tr>
          </thead>
          <tbody class="table-group-divider">
            {% for client in clients %}
              <tr>
                <td>{{ client.last_name }}</td>
                <td>{{ client.first_name }}</td>
                <td>{{ client.email }}</td>
                <td>{{ client.phone|default:"—" }}</td>
                <td>{{ client.address|default:"—" }}</td>
                <td class="text-center" style="min-width:110px;">
                  <a
                    href="{% url 'client:client_edit' client.id %}"
                    class="btn-action btn-edit btn-sm me-1"
                    data-bs-toggle="tooltip"
                    title="Editar"
                  >
                    <i class="bi bi-pencil-fill"></i>
                  </a>
                  <a
                    href="{% url 'client:client_delete' client.id %}"
                    class="btn-action btn-delete btn-sm"
                    data-bs-toggle="tooltip"
                    title="Eliminar"
                  >
                    <i class="bi bi-trash-fill"></i>
                  </a>
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  {% else %}
    <p class="text-center fst-italic">No hay clientes cargados.</p>
  {% endif %}
</div>
{% endblock %}

